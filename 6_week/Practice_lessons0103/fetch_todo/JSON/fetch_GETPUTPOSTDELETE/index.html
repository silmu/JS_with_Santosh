<!DOCTYPE html>
<html>
  <body>
    <h1>Get hands on with JavaScript's Fetch API</h1>
    <p>
      Write your requests in the script and watch the console and network logs.
    </p>

    <script>
      // GET retrieve all to-do's
      class FetchWrapper {
        constructor(baseURL) {
          this.baseURL = baseURL;
        }

        get(id) {
          return fetch(this.baseURL + id).then((response) => response.json());
        }

        post(userId) {
          // const random = Math.floor(Math.random() * 1000);
          // return _send('post', this.baseURL + random);
        }

        put(endpoint, id) {
          // return send('put', endpoint, 5);
        }
        patch(endpoint) {}
      }

      const API = new FetchWrapper(
        'https://jsonplaceholder.typicode.com/todos/'
      );
      //Alternative GET method
      // fetch('https://jsonplaceholder.typicode.com/todos/')
      //   .then((response) => response.json())
      //   .then((data) => {
      //     console.log(data);
      //   });

      // will return all resources

      // GET retrieves the to-do with specific URI (in this case id = 5)
      // API.get(5).then((data) => console.log(data));

      //Alternative POST method
      // fetch('https://jsonplaceholder.typicode.com/todos/5')
      //   .then((response) => response.json())
      //   .then((data) => {
      //     console.log(data);
      //   });

      /* will return this specific resource:
        {
            "userId": 1,
            "id": 5,
            "title": "laboriosam mollitia et enim quasi adipisci quia provident illum",
            "completed": false
        }
        */

      // POST adds a random id to the object sent
      // fetch('https://jsonplaceholder.typicode.com/todos', {
      //   method: 'POST',
      //   body: JSON.stringify({
      //     userId: 10,
      //     title: 'clean room',
      //     completed: false,
      //   }),
      //   headers: {
      //     'Content-Type': 'application/json; charset=utf-8',
      //   },
      // })
      //   .then((response) => response.json())
      //   .then((data) => {
      //     console.log(data);
      //   });

      // will return

      // fetch('https://jsonplaceholder.typicode.com/todos/5', {
      //   method: 'PUT',
      //   body: JSON.stringify({
      //     userId: 1,
      //     id: 5,
      //     title: 'read a book',
      //     completed: false,
      //   }),
      //   headers: {
      //     'Content-Type': 'application/json; charset=utf-8',
      //   },
      // })
      //   .then((response) => response.json())
      //   .then((data) => {
      //     console.log(data);
      //   });

      // fetch('https://jsonplaceholder.typicode.com/todos/5')
      //   .then((response) => response.json())
      //   .then((data) => {
      //     console.log(data);
      //   });

      // PUT to the resource with id = 5 to change the name of task

      /* will return
        {
            "userId": 1,
            "id": 5,
            "title": "hello task",
            "completed": false
        }
        */

      // PATCH to the resource id = 1
      // update that task is completed

      /* will return
        {
            "userId": 1,
            "id": 1,
            "title": "delectus aut autem",
            "completed": true
        }
        */
      // fetch('https://jsonplaceholder.typicode.com/todos/1', {
      //   method: 'PATCH',
      //   body: JSON.stringify({
      //     completed: true,
      //   }),
      //   headers: {
      //     'Content-Type': 'application/json; charset=utf-8',
      //   },
      // })
      //   .then((response) => response.json())
      //   .then((data) => {
      //     console.log(data);
      //   });

      fetch('https://jsonplaceholder.typicode.com/todos/1')
        .then((response) => response.json())
        .then((data) => {
          console.log(data);
        });
      // DELETE task with id = 1

      fetch('https://jsonplaceholder.typicode.com/todos/1', {
        method: 'DELETE',
      })
        .then((response) => response.json())
        .then((data) => {
          console.log(data);
        });

      // empty response: {}
    </script>
  </body>
</html>
